<script setup lang="ts">
import { ref } from 'vue'

withDefaults(
  defineProps<{
    // 是否显示关闭按钮
    isShowClose?: boolean
    // 对其方式
    align?: 'left' | 'right'
    // 倾斜方式
    rotateMode?: 'left' | 'right'
    // 距离
    alignOffset?: number
    // 距离顶部
    topOffset?: number
  }>(),
  {
    isShowClose: false,
    align: 'left',
    rotateMode: 'left',
    alignOffset: 40,
    topOffset: -180,
  },
)
// 是否显示卡片
const isShowCard = ref(true)
function handleShowCard(boo: boolean) {
  isShowCard.value = boo
}

// 是否显示微信二维码
const isShowWx = ref(false)
function handleClick() {
  isShowWx.value = !isShowWx.value
}
</script>

<template>
  <div
    class="card"
    :style="{
      opacity: isShowCard ? '1' : '0',
      left: align === 'left' ? `${alignOffset}px` : 'unset',
      right: align === 'right' ? `${alignOffset}px` : 'unset',
      top: `${topOffset}px`,
      transform: rotateMode === 'left' ? 'rotate(-5deg)' : 'rotate(5deg)',
    }"
  >
    <div class="wx" :style="{ transform: isShowWx ? 'rotateY(180deg)' : 'rotateY(0deg)' }" @click="handleClick">
      <div class="qr">
        <div class="img-little" />
        <div class="img-little" />
        <div class="img-little" />
        <img class="img" src="./wx.jpg" alt="">
        <div class="img-little">
          微信赞赏码（点击切换支付宝）
        </div>
      </div>
      <div class="text">
        <div class="text-wave-top" />
        <div class="text-content">
          鼓励一下
          <span class="text-little">8.88</span>
        </div>
        <div class="text-wave-bottom" />
      </div>

      <div v-if="isShowClose" class="close" @click.stop="handleShowCard(false)">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m7 7l10 10M7 17L17 7" /></svg>
      </div>
    </div>

    <div class="zfb" :style="{ transform: !isShowWx ? 'rotateY(180deg)' : 'rotateY(0deg)' }" @click="handleClick">
      <div class="qr">
        <div class="img-little" />
        <div class="img-little" />
        <div class="img-little" />
        <img class="img" src="./zfb.jpg" alt="">
        <div class="img-little">
          支付宝赞赏码（点击切换微信）
        </div>
      </div>
      <div class="text">
        <div class="text-wave-top" />
        <div class="text-content">
          鼓励一下
          <span class="text-little">8.88</span>
        </div>
        <div class="text-wave-bottom" />
      </div>

      <div v-if="isShowClose" class="close" @click="handleShowCard(false)">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="m7 7l10 10M7 17L17 7" /></svg>
      </div>
    </div>
  </div>
</template>

<style scoped>
.card {
  position: fixed;
  width: 200px;
  height: 234px;
  transform: rotate(-5deg);
  transition: all 0.5s cubic-bezier(0.19, 1, 0.22, 1);
  user-select: none;
}
.close {
  position: absolute;
  top: 8px;
  right: 0;
}
.card:hover {
  top: 0px !important;
  transform: rotate(0) !important;
}

.wx {
  position: absolute;
  top: 0;
  left: 0;
  width: 200px;
  height: 234px;
  background: #f4f3fa;
  border-radius: 30px;
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  perspective-origin: 0 0;
  cursor: pointer;
  transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.zfb {
  position: absolute;
  top: 0;
  left: 0;
  width: 200px;
  height: 234px;
  background: #f4f3fa;
  border-radius: 30px;
  box-shadow: 0 0 30px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  perspective-origin: 0 0;
  cursor: pointer;
  transition: all 1s cubic-bezier(0.19, 1, 0.22, 1);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.qr {
  width: 100%;
  height: 180px;
  display: grid;
  place-items: center;
}

.img {
  object-fit: contain;
  width: calc(160px - 20px);
  border: 2px dashed #020661;
  border-radius: 10px;
}

.img-little {
  font-size: 12px;
  color: rgba(0, 0, 0, 0.47);
}

.text {
  width: 100%;
  height: 56px;
  color: white;
  font-weight: 900;
  font-size: 24px;
  text-align: center;
  line-height: 76px;
  user-select: none;
}

.text-content {
  width: 100%;
  line-height: calc(56px - 20px);
  background: #020661;
}

.text-little {
  font-size: 14px;
  color: red;
  font-weight: 400;
}

.text-wave-bottom {
  background: #020661;
  width: 100%;
  height: 10px;
}

.text-wave-top {
  background: #020661;
  width: 100%;
  height: 10px;
  mask-size:
    17px 10px,
    10px calc(100% - 20px),
    17px 10px;
  mask-position:
    0 0,
    center 10px,
    0 100%;
  mask-repeat: repeat-x;
  mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:serif='http://www.serif.com/' width='100%25' height='100%25' viewBox='17 0 17 40' preserveAspectRatio='xMidYMin slice' version='1.1' xml:space='preserve' style='fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;fill:transparent;'%3E%3Cg transform='matrix(1,0,0,1,0.00216511,0)'%3E%3Cg transform='matrix(0.997444,0,0,1.0,-367.767,-282)'%3E%3Cpath d='M402.739,321.467L402.787,321.467C407.047,321.467 407.047,317.467 411.307,317.467C415.567,317.467 415.567,321.467 419.827,321.467L419.827,287.378C415.567,287.378 415.567,283.378 411.307,283.378C407.064,283.378 407.047,287.347 402.837,287.378L402.787,287.378C400.724,287.378 399.66,286.44 398.627,285.472L398.427,285.285C397.395,284.317 396.331,283.378 394.267,283.378C392.204,283.378 391.14,284.317 390.107,285.285L389.907,285.472C388.875,286.44 387.811,287.378 385.747,287.378C381.487,287.378 381.487,283.378 377.227,283.378C372.967,283.378 372.967,287.378 368.707,287.378L368.707,321.467C372.967,321.467 372.967,317.467 377.227,317.467C381.47,317.467 381.487,321.436 385.697,321.467L385.747,321.467C390.007,321.467 390.007,317.467 394.267,317.467C396.331,317.467 397.395,318.406 398.427,319.374L398.627,319.561C399.651,320.521 400.707,321.453 402.739,321.467Z' style='fill:white;fill-rule:nonzero;'/%3E%3C/g%3E%3Cg transform='matrix(0.997444,0,0,0.997444,-367.767,-281.657)'%3E%3Cpath d='M402.738,321.467L402.688,321.467L402.639,321.466L402.59,321.464L402.542,321.463L402.494,321.461L402.447,321.458L402.4,321.456L402.353,321.453L402.307,321.449L402.261,321.446L402.215,321.442L402.17,321.437L402.125,321.433L402.08,321.428L402.036,321.422L401.979,321.415L401.937,321.409L401.895,321.403L401.854,321.397L401.813,321.39L401.773,321.383L401.735,321.376C401.68,321.366 401.625,321.355 401.572,321.343L401.531,321.334L401.491,321.325L401.451,321.315L401.412,321.306L401.373,321.295L401.334,321.285L401.295,321.274L401.257,321.263L401.219,321.252L401.181,321.241L401.144,321.229L401.091,321.212L401.056,321.2L401.021,321.188L400.986,321.176L400.951,321.163L400.917,321.15L400.883,321.137L400.849,321.124L400.815,321.111L400.784,321.098L400.745,321.082L400.715,321.069L400.681,321.054C400.662,321.046 400.642,321.037 400.623,321.028L400.615,321.025C400.597,321.016 400.578,321.008 400.56,320.999L400.55,320.994L400.49,320.965L400.466,320.953L400.449,320.944L400.428,320.934L400.402,320.92L400.384,320.911L400.366,320.902L400.339,320.887L400.32,320.877L400.305,320.869L400.276,320.852L400.245,320.835L400.196,320.807L400.185,320.801L400.134,320.771L400.127,320.766L400.069,320.73L400.013,320.696C399.974,320.67 399.935,320.645 399.896,320.619L399.842,320.582L399.787,320.544L399.733,320.505L399.679,320.466L399.625,320.426L399.572,320.385L399.52,320.345L399.503,320.332L399.468,320.303L399.449,320.289L399.416,320.262L399.396,320.245L399.365,320.22L399.342,320.202L399.314,320.178L399.29,320.158L399.263,320.135L399.237,320.113L399.213,320.092L399.185,320.068L399.163,320.049L399.133,320.023L399.113,320.006L399.064,319.962L399.014,319.918L399.006,319.911C398.978,319.885 398.95,319.86 398.923,319.835L398.917,319.83L398.859,319.777L398.82,319.74L398.725,319.653C398.692,319.622 398.66,319.592 398.627,319.561L398.427,319.374L398.329,319.282L398.23,319.19L398.195,319.157L398.13,319.099L398.044,319.021L398.009,318.989L397.979,318.962L397.928,318.918L397.907,318.899L397.877,318.873L397.855,318.855L397.826,318.829L397.804,318.81L397.774,318.785L397.752,318.766L397.722,318.742L397.7,318.723L397.67,318.698L397.647,318.68L397.617,318.655L397.594,318.637L397.563,318.613L397.54,318.595L397.51,318.571L397.486,318.553L397.455,318.529L397.432,318.512L397.401,318.488L397.377,318.471L397.345,318.447L397.322,318.43L397.289,318.407L397.266,318.39L397.233,318.367L397.209,318.351L397.176,318.328L397.152,318.312L397.118,318.289L397.095,318.274L397.059,318.251L397.036,318.236L396.999,318.213L396.977,318.199L396.917,318.163L396.857,318.127L396.796,318.092L396.734,318.057L396.671,318.024L396.607,317.991L396.543,317.959L396.488,317.933L396.479,317.929L396.423,317.903L396.414,317.898L396.357,317.873L396.348,317.869L396.291,317.845L396.262,317.833L396.228,317.819L396.193,317.806L396.158,317.792L396.123,317.779L396.088,317.766L396.052,317.753L396.016,317.741L395.98,317.728L395.943,317.716L395.907,317.704L395.87,317.693L395.833,317.682L395.795,317.671L395.757,317.66L395.719,317.649L395.681,317.639L395.642,317.629L395.603,317.619L395.564,317.61L395.525,317.601L395.485,317.592L395.445,317.583L395.405,317.575L395.364,317.567L395.323,317.559L395.282,317.552L395.241,317.545L395.199,317.538L395.156,317.531L395.114,317.525L395.071,317.519L395.028,317.513L394.984,317.508L394.964,317.506L394.92,317.501L394.875,317.496L394.831,317.492L394.786,317.488L394.74,317.485L394.695,317.481L394.648,317.478L394.602,317.476L394.555,317.474L394.508,317.472L394.461,317.47L394.413,317.469L394.365,317.468L394.316,317.467L394.267,317.467C390.007,317.467 390.007,321.467 385.747,321.467L385.697,321.467C385.354,321.465 385.039,321.436 384.747,321.385L384.747,321.467C384.747,322.02 385.195,322.467 385.747,322.467C388.21,322.467 389.46,321.352 390.692,320.196C391.59,319.352 392.47,318.467 394.267,318.467C396.065,318.467 396.944,319.352 397.843,320.196C399.074,321.352 400.324,322.467 402.787,322.467C403.339,322.467 403.787,322.02 403.787,321.467L403.787,321.385C403.481,321.438 403.15,321.467 402.787,321.467L402.738,321.467ZM394.218,283.378L394.267,283.378L394.317,283.378L394.366,283.379L394.415,283.38L394.464,283.381L394.512,283.383L394.56,283.385L394.607,283.387L394.654,283.39L394.701,283.393L394.747,283.396L394.793,283.4L394.839,283.404L394.884,283.408L394.929,283.413L394.974,283.418L395.018,283.423L395.062,283.429L395.105,283.435L395.149,283.441L395.192,283.448L395.234,283.455L395.276,283.462L395.329,283.471L395.369,283.479L395.409,283.487L395.449,283.495L395.488,283.503L395.527,283.512L395.566,283.521L395.603,283.53C395.629,283.537 395.655,283.543 395.681,283.55L395.72,283.561L395.759,283.571L395.797,283.582L395.835,283.593L395.873,283.605L395.91,283.617L395.948,283.628L395.984,283.641L396.021,283.653L396.057,283.666L396.094,283.679L396.129,283.692L396.165,283.706L396.2,283.719L396.235,283.733L396.27,283.747L396.291,283.756C396.31,283.764 396.329,283.772 396.348,283.78L396.357,283.784C396.376,283.793 396.395,283.801 396.414,283.809L396.423,283.814C396.442,283.822 396.461,283.831 396.479,283.84L396.488,283.844C396.506,283.852 396.525,283.861 396.543,283.87L396.547,283.872L396.61,283.903L396.671,283.935C396.713,283.957 396.755,283.98 396.796,284.003L396.855,284.037L396.914,284.072L396.973,284.107L397.031,284.144L397.088,284.181L397.145,284.218L397.158,284.227L397.201,284.256L397.216,284.266L397.257,284.295L397.273,284.306L397.312,284.334L397.329,284.347L397.366,284.374L397.386,284.388L397.42,284.414L397.441,284.429L397.474,284.454L397.496,284.471L397.527,284.495L397.551,284.514L397.58,284.537L397.605,284.557L397.632,284.578L397.658,284.6L397.683,284.621L397.712,284.644L397.735,284.663L397.765,284.688L397.786,284.706L397.817,284.732L397.837,284.749L397.869,284.777L397.887,284.793L397.921,284.822L397.937,284.837L397.987,284.881L398.037,284.925L398.044,284.932C398.073,284.958 398.102,284.984 398.13,285.01L398.135,285.014L398.227,285.098L398.233,285.104L398.33,285.194L398.427,285.285C398.427,285.285 398.627,285.472 398.627,285.472L398.725,285.564L398.824,285.656L398.86,285.688L398.924,285.747L399.01,285.825L399.045,285.857L399.075,285.883L399.126,285.928L399.147,285.946L399.177,285.972L399.199,285.991L399.228,286.017L399.25,286.035L399.28,286.06L399.302,286.079L399.332,286.104L399.355,286.123L399.385,286.147L399.407,286.166L399.437,286.19L399.46,286.208L399.491,286.233L399.514,286.251L399.544,286.275L399.568,286.293L399.599,286.316L399.622,286.334L399.653,286.358L399.677,286.375L399.709,286.398L399.732,286.415L399.765,286.439L399.788,286.455L399.821,286.478L399.845,286.495L399.878,286.518L399.902,286.534L399.936,286.556L399.96,286.572L399.995,286.595L400.018,286.609L400.055,286.633L400.077,286.646L400.137,286.683L400.197,286.719L400.258,286.754L400.32,286.788L400.383,286.822L400.447,286.854L400.511,286.886L400.566,286.913L400.575,286.917L400.631,286.943L400.64,286.947L400.697,286.972L400.706,286.976L400.763,287.001L400.792,287.012L400.826,287.026L400.861,287.04L400.896,287.053L400.931,287.067L400.966,287.08L401.002,287.093L401.038,287.105L401.074,287.117L401.111,287.129L401.147,287.141L401.184,287.153L401.221,287.164L401.259,287.175L401.297,287.186L401.335,287.196L401.373,287.206L401.412,287.217L401.451,287.226L401.49,287.236L401.529,287.245L401.569,287.254L401.609,287.262L401.649,287.271L401.69,287.279L401.731,287.286L401.772,287.294L401.814,287.301L401.855,287.308L401.898,287.314L401.94,287.32L401.983,287.326L402.026,287.332L402.07,287.337L402.09,287.34L402.134,287.345L402.179,287.349L402.223,287.353L402.269,287.357L402.314,287.361L402.36,287.364L402.406,287.367L402.452,287.37L402.499,287.372L402.546,287.374L402.593,287.375L402.641,287.377L402.689,287.378L402.738,287.378L402.787,287.378L402.837,287.378C403.179,287.376 403.493,287.347 403.784,287.297C403.742,286.783 403.312,286.378 402.787,286.378C400.99,286.378 400.11,285.493 399.212,284.649C397.98,283.493 396.73,282.378 394.267,282.378C391.804,282.378 390.554,283.493 389.323,284.649C388.424,285.493 387.545,286.378 385.747,286.378C385.222,286.378 384.792,286.783 384.75,287.297C385.055,287.35 385.386,287.378 385.747,287.378L385.796,287.378L385.845,287.378L385.893,287.377L385.941,287.375L385.988,287.374L386.035,287.372L386.082,287.37L386.128,287.367L386.175,287.364L386.22,287.361L386.266,287.357L386.311,287.353L386.355,287.349L386.4,287.345L386.444,287.34L386.487,287.335L386.531,287.329L386.551,287.326L386.594,287.32L386.636,287.314L386.679,287.308L386.721,287.301L386.762,287.294L386.803,287.286L386.844,287.279L386.885,287.271L386.925,287.262L386.965,287.254L387.005,287.245L387.044,287.236L387.083,287.226L387.122,287.217L387.161,287.206L387.199,287.196L387.237,287.186L387.275,287.175L387.313,287.164L387.35,287.153L387.387,287.141L387.423,287.129L387.46,287.117L387.496,287.105L387.532,287.093L387.568,287.08L387.603,287.067L387.638,287.053L387.673,287.04L387.708,287.026L387.742,287.012L387.771,287.001L387.828,286.976L387.837,286.972L387.894,286.947L387.903,286.943L387.959,286.917L387.968,286.913L388.023,286.886L388.087,286.854L388.151,286.822L388.214,286.788L388.276,286.754L388.337,286.719L388.397,286.683L388.457,286.646L388.479,286.633L388.516,286.609L388.539,286.595L388.575,286.572L388.598,286.556L388.632,286.534L388.656,286.518L388.689,286.495L388.713,286.478L388.746,286.455L388.769,286.439L388.802,286.415L388.825,286.398L388.857,286.375L388.881,286.358L388.912,286.334L388.935,286.316L388.966,286.293L388.99,286.275L389.02,286.251L389.043,286.233L389.074,286.208L389.097,286.19L389.127,286.166L389.15,286.147L389.18,286.123L389.202,286.104L389.232,286.079L389.254,286.06L389.284,286.035L389.306,286.017L389.335,285.991L389.357,285.972L389.387,285.946L389.408,285.928L389.459,285.883L389.51,285.838L389.524,285.825L389.61,285.747L389.675,285.688L389.71,285.656L389.809,285.564C389.908,285.471 390.008,285.378 390.107,285.285L390.207,285.191L390.301,285.104L390.399,285.014L390.404,285.01C390.432,284.984 390.461,284.958 390.49,284.932L390.51,284.913L390.547,284.881L390.597,284.837L390.647,284.793L390.697,284.749L390.717,284.732L390.748,284.706L390.77,284.688L390.799,284.663L390.822,284.644L390.851,284.621L390.876,284.6L390.902,284.578L390.929,284.557L390.955,284.537L390.983,284.514L391.007,284.495L391.038,284.471L391.06,284.454L391.093,284.429L391.114,284.414L391.149,284.388L391.168,284.374L391.205,284.347L391.222,284.334L391.261,284.306L391.277,284.295L391.319,284.266L391.333,284.256L391.376,284.227L391.389,284.218L391.435,284.188L391.446,284.181L391.494,284.15L391.503,284.144L391.554,284.112L391.561,284.107L391.614,284.075L391.62,284.072L391.679,284.037L391.738,284.003C391.779,283.98 391.821,283.957 391.863,283.935L391.924,283.903L391.988,283.872L391.991,283.87C392.009,283.861 392.028,283.852 392.046,283.844L392.055,283.84C392.073,283.831 392.092,283.822 392.111,283.814L392.12,283.809C392.139,283.801 392.158,283.793 392.177,283.784L392.186,283.78C392.205,283.772 392.224,283.764 392.243,283.756L392.282,283.74L392.316,283.726L392.35,283.713L392.385,283.7L392.419,283.687L392.454,283.674L392.489,283.662L392.524,283.649L392.56,283.637L392.596,283.625L392.632,283.614L392.668,283.603L392.705,283.592L392.742,283.581L392.779,283.57L392.816,283.56L392.853,283.55C392.879,283.543 392.905,283.537 392.931,283.53L392.971,283.521L393.011,283.511L393.051,283.502L393.092,283.494L393.133,283.485L393.174,283.477L393.216,283.469L393.258,283.462L393.3,283.455L393.343,283.448L393.385,283.441L393.429,283.435L393.472,283.429L393.516,283.423L393.56,283.418L393.605,283.413L393.65,283.408L393.695,283.404L393.741,283.4L393.787,283.396L393.833,283.393L393.88,283.39L393.937,283.387L393.983,283.384L394.03,283.383L394.076,283.381L394.124,283.38L394.171,283.379L394.218,283.378Z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
</style>
